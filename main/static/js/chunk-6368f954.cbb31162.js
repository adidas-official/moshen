(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6368f954"],{2465:function(t,e,s){"use strict";s.d(e,"c",(function(){return l})),s.d(e,"a",(function(){return c})),s.d(e,"b",(function(){return u})),s.d(e,"d",(function(){return _}));var n=s("be3b"),a="/order/cancelOrder",i="/order/createEntryOrder",o="/order/pageList",r="/paramter/getParamListByKeyName";function l(t){return Object(n.a)({url:r,method:"get",params:t})}function c(t){return Object(n.a)({url:a,method:"post",data:t})}function u(t){return Object(n.a)({url:i,method:"post",data:t})}function _(t){return Object(n.a)({url:o,method:"get",params:t})}},4851:function(t,e,s){"use strict";s("d1fb")},5622:function(t,e,s){"use strict";s("daf8")},"597d":function(t,e,s){"use strict";s("aa25")},"7e2b":function(t,e,s){"use strict";s.d(e,"a",(function(){return d}));var n=s("2909"),a=s("5530"),i=s("d4ec"),o=s("bee2"),r=(s("b680"),s("d3b7"),s("4de4"),s("2465")),l=s("75fa"),c=s("4328"),u=s.n(c),_=s("ca00"),d=function(){function t(){Object(i.a)(this,t),this.tradeType="BUY",this.quoteCoin="BTC",this.baseCoin="USDT",this.symbol="btcusdt",this.entryStatus="EFFECTIVE",this.quotePrice=null,this.baseCount=null,this.baseAvailable=0,this.quoteAvailable=0,this.pageSize=10,this.offset=1,this.fee=0,this.list=[],this.params={token:Object(_.h)(),userId:Object(_.i)()},this.loading=!1,this.cancelLoading=!1,this.totalListCount=0,this.cancelInfo={id:-1},this.loadingMore=!1,this.noMore=!0}return Object(o.a)(t,[{key:"progress",get:function(){var t=this.baseCount,e=this.quotePrice,s=this.baseAvailable,n=this.quoteAvailable,a=this.tradeType,i=0;return"BUY"==a&&s>0&&(i=e*t/s*100),"SELL"==a&&(i=n>0?t/n*100:0),i>100&&(i=100),i=parseFloat(i.toFixed(2))}},{key:"realAmount",get:function(){var t=this.fee,e=this.quotePrice,s=this.baseCount;return("BUY"==this.tradeType?e*s*(1+t):e*s*(1-t))||0},set:function(t){}},{key:"getRee",value:function(){var t=this;Object(r.c)({paramName:"FEE_RATE"}).then((function(e){var s=e.data,n=s.code,a=s.data;if(1==n){var i=a.valueName;t.fee=+i}}))}},{key:"getActionList",value:function(){var t=this,e=this.params,s=this.offset,i=this.pageSize,o=this.entryStatus,l=this.symbol,c=this.tradeType,u=Object(a.a)(Object(a.a)({},e),{},{offset:s,pageSize:i,entryStatus:o,symbol:l,tradeType:c});return u=Object(_.c)(u),this.loadingMore=!0,new Promise((function(e,a){Object(r.d)(u).then((function(a){var i=a.data,o=i.code,r=i.data,l=i.msg;if(t.loadingMore=!1,1==o){var c,u=r.pageList,_=r.totalCount;if(t.totalListCount=_,1==s)t.list=u||[];else(c=t.list).push.apply(c,Object(n.a)(u));t.list.length>=t.totalListCount?t.noMore=!0:t.noMore=!1,e("success")}else e(l||"error")})).catch((function(t){return a(t)}))}))}},{key:"postAction",value:function(){var t=this,e=this.baseCount,s=this.baseCoin,n=this.quotePrice,i=this.quoteCoin,o=this.tradeType,c=this.symbol;if(!n||n<1e-6)return Object(l.a)("l.o_enterprice","error"),Promise.reject("error");if(!e||e<1e-6)return Object(l.a)("l.o_enteramount","error"),Promise.reject("error");var _="BUY"==o?"l.o_buying":"l.o_selling";return Object(l.a)(_,"loading"),this.loading=!0,new Promise((function(_,d){Object(r.b)(u.a.stringify(Object(a.a)({baseCount:e,baseCoin:i,quotePrice:n,quoteCoin:s,tradeType:o,symbol:c},t.params))).then((function(e){t.loading=!1;var s=e.data,n=s.code,a=s.msg;1==n?(Object(l.a)("l.o_hasmount","success"),t.baseCount=null,_("success")):(Object(l.a)(a||"error","error"),d(a))})).catch((function(e){t.loading=!1,d(e)}))}))}},{key:"cancelAction",value:function(){var t=this,e=this.cancelInfo.id;return Object(l.a)("l.o_canneling","loading"),this.cancelLoading=!0,new Promise((function(s,n){Object(r.a)(u.a.stringify(Object(a.a)({entryOrderId:e},t.params))).then((function(a){t.cancelLoading=!1;var i=a.data,o=i.code,r=i.msg;1==o?(Object(l.a)("l.o_hascannel","success"),t.cancelInfo={id:-1},t.list=t.list.filter((function(t){return t.id!==e})),s("success")):(Object(l.a)(r||"error","error"),n(r))})).catch((function(e){t.cancelLoading=!1,n(e)}))}))}}]),t}()},aa25:function(t,e,s){},d1fb:function(t,e,s){},daf8:function(t,e,s){},f014:function(t,e,s){"use strict";s.r(e);var n=s("ff67"),a=s("4060"),i=s("87ab"),o=s("14e2"),r=s("5530"),l=(s("99af"),s("7e2b")),c=s("5880"),u={name:"UDelegate",props:{info:{type:Object,default:{}}},watch:{info:{deep:!0,immediate:!0,handler:function(t){this.trade.baseCoin=t.baseCurrency,this.trade.quoteCoin=t.currency,this.trade.symbol="".concat(t.currency.toLowerCase()).concat(t.baseCurrency.toLowerCase()),this.onPullingDown()}}},components:{},computed:Object(r.a)({},Object(c.mapGetters)("user",{isLogin:"GET_ISLOGIN"})),data:function(){return{trade:new l.a,counter:0}},mounted:function(){this.onPullingDown()},methods:{changeType:function(t){this.trade.tradeType=t,this.onPullingDown()},onPullingDown:function(){this.counter=0,this.isLogin&&(this.trade.offset=1,this.trade.getActionList())},onPullingUp:function(){this.trade.offset+=1,this.trade.getActionList()},cancelOrder:function(t){var e=this;this.trade.cancelInfo=Object(r.a)({},t),this.trade.cancelAction().then((function(t){e.onPullingDown()}))},statusColor:function(t){var e,s=t.entryStatus;return"EFFECTIVE"==s&&(e="color:#67C23A;border-color:#67C23A;"),"FINISH"==s&&(e="color:#F56C6B;border-color:#F56C6B;"),"CANCEL"==s&&(e="color:#9BA0B0;border-color:#9BA0B0;"),e},orderStatus:function(t){var e,s=t.entryStatus;return"EFFECTIVE"==s&&(e=this.$t("l.j_unfinished")),"FINISH"==s&&(e=this.$t("l.j_hasfinished")),"CANCEL"==s&&(e=this.$t("l.j_hascanceled")),e}}},_=(s("5622"),s("2877")),d=Object(_.a)(u,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"total"},[s("span",[t._v(t._s(t.$t("l.j_del")))]),s("span",{staticClass:"select"},[s("el-button",{staticClass:"select_btn",class:"BUY"==t.trade.tradeType?"selected":"",on:{click:function(e){return t.changeType("BUY")}}},[t._v(t._s(t.$t("l.j_buyk")))]),s("el-button",{staticClass:"select_btn",class:"SELL"==t.trade.tradeType?"selected":"",on:{click:function(e){return t.changeType("SELL")}}},[t._v(t._s(t.$t("l.j_sellk")))])],1)]),s("div",{staticClass:"assert"},[s("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.onPullingUp,expression:"onPullingUp"}],staticStyle:{overflow:"auto"},attrs:{id:"pTable"}},[s("li",{staticClass:"pHeader"},[s("span",[t._v(t._s(t.$t("l.z_typest")))]),s("span",[t._v(t._s(t.$t("l.p_tpair")))]),s("span",[t._v(t._s(t.$t("l.s_pricet")))]),s("span",[t._v(t._s(t.$t("l.s_numl")))]),s("span",[t._v(t._s(t.$t("l.s_timed")))]),s("span",[t._v(t._s(t.$t("l.h_n3")))])]),t._l(t.trade.list,(function(e,n){return s("li",{key:n,staticClass:"pContent"},[s("span",[s("div",{staticClass:"status-b",style:{color:"BUY"==e.tradeType?"#06AB8E":"#CD2A46",borderColor:"BUY"==e.tradeType?"#06AB8E":"#CD2A46"}},[t._v(t._s("BUY"==e.tradeType?t.$t("l.j_buyk"):t.$t("l.j_sellk")))])]),s("span",[t._v(t._s(e.baseCoin)+"/"+t._s(e.quoteCoin))]),s("span",[t._v(t._s(e.quotePrice))]),s("span",[t._v(t._s(t.$formatDecimal(e.baseCount)))]),s("span",[t._v(t._s(t.$formatTime(e.createTime,"HH:MM MM/DD")))]),s("span",[s("el-button",{staticClass:"cancel-btn",attrs:{loading:t.trade.cancelInfo.id==e.id&&t.trade.cancelLoading},on:{click:function(s){return t.cancelOrder(e)}}},[t._v(t._s(t.$t("l.j_canceld")))])],1)])})),s("p",{staticClass:"el-loading-footer-tip"},[t._v(t._s(t.trade.loadingMore?this.$t("l.f_refresh_d"):t.trade.noMore?this.$t("l.f_refresh_c"):this.$t("l.f_refresh_b")))])],2)])])}),[],!1,null,"f03d57b8",null).exports,b=s("1cdd"),h={name:"OperPanel",props:{info:{type:Object,default:{}}},watch:{info:{deep:!0,immediate:!0,handler:function(t){this.buy_a.tradeType="BUY",this.buy_a.baseCoin=t.baseCurrency,this.buy_a.quoteCoin=t.currency,this.buy_a.symbol="".concat(t.currency.toLowerCase()).concat(t.baseCurrency.toLowerCase()),this.sell_a.tradeType="SELL",this.sell_a.baseCoin=t.baseCurrency,this.sell_a.quoteCoin=t.currency,this.sell_a.symbol="".concat(t.currency.toLowerCase()).concat(t.baseCurrency.toLowerCase()),this.getConfigInfo()}}},computed:Object(r.a)({},Object(c.mapGetters)("user",{isLogin:"GET_ISLOGIN"})),data:function(){return{tradeType:"BUY",buy_a:new l.a,sell_a:new l.a,assert:new b.a}},mounted:function(){var t=this;this.$eventBus.$on("priceChange",(function(e){t.buy_a.quotePrice=e,t.sell_a.quotePrice=e})),this.buy_a.getRee(),this.sell_a.getRee()},methods:{changeType:function(t){this.tradeType=t},getConfigInfo:function(){var t=this;this.isLogin&&this.assert.queryAsserts().then((function(){var e=t.assert.findAssertAvailable(t.buy_a.baseCoin);t.buy_a.baseAvailable=e.availableCurrency;var s=t.assert.findAssertAvailable(t.buy_a.quoteCoin);t.buy_a.quoteAvailable=null==s?void 0:s.availableCurrency,t.sell_a.baseAvailable=e.availableCurrency,t.sell_a.quoteAvailable=null==s?void 0:s.availableCurrency}))},rechargeClick:function(){this.$router.push({path:"/account/assert/2"})},submitSell:function(){var t=this;this.isLogin?this.sell_a.postAction().then((function(e){t.$emit("refresh"),t.getConfigInfo()})):this.$router.push({path:"login/login"})},submitBuy:function(){var t=this;this.isLogin?this.buy_a.postAction().then((function(e){t.$emit("refresh"),t.getConfigInfo()})):this.$router.push({path:"login/login"})}}},f=(s("4851"),Object(_.a)(h,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"oper"},[s("div",{staticClass:"oper__desc"},[s("div",{staticClass:"oper__desc-title"},[t._v(t._s(t.$t("l.h_n3")))]),s("div",{staticClass:"oper__desc-tip",on:{click:t.rechargeClick}},[t._v(t._s(t.$t("l.s_recharge")))])]),s("div",{staticClass:"oper__action"},[s("el-button",{staticClass:"oper__action-btn",class:"BUY"==t.tradeType?"buy-selected":"",on:{click:function(e){return t.changeType("BUY")}}},[t._v(t._s(t.$t("l.s_buys")+" "+t.buy_a.quoteCoin))]),s("el-button",{staticClass:"oper__action-btn",class:"SELL"==t.tradeType?"sell-selected":"",on:{click:function(e){return t.changeType("SELL")}}},[t._v(t._s(t.$t("l.s_sells")+" "+t.sell_a.quoteCoin))])],1),"BUY"==t.tradeType?s("div",{staticClass:"panel__oper-item"},[s("div",{staticClass:"input"},[s("div",{staticClass:"input__desc"},[s("span",[t._v(t._s(t.$t("l.j_ket"))+" "+t._s(t.buy_a.baseCoin)+": ")]),s("span",[t._v(t._s(t.$formatDecimal(t.buy_a.baseAvailable)))])]),s("div",{staticClass:"input__item"},[s("i",{staticClass:"iconfont icon-num"}),s("el-input-number",{ref:"priceInput_a",staticClass:"input__item-i",attrs:{controls:!1,min:0,precision:4,step:1,placeholder:t.$t("l.j_plsenter")},model:{value:t.buy_a.quotePrice,callback:function(e){t.$set(t.buy_a,"quotePrice",e)},expression:"buy_a.quotePrice"}}),s("el-button",{staticClass:"item-btn"},[t._v(t._s(t.buy_a.baseCoin))])],1),s("div",{staticClass:"input__item"},[s("i",{staticClass:"iconfont icon-amt"}),s("el-input-number",{staticClass:"input__item-i",attrs:{controls:!1,min:0,precision:6,step:.01,placeholder:t.$t("l.s_numl")},model:{value:t.buy_a.baseCount,callback:function(e){t.$set(t.buy_a,"baseCount",e)},expression:"buy_a.baseCount"}}),s("el-button",{staticClass:"item-btn"},[t._v(t._s(t.buy_a.quoteCoin))])],1),s("div",{staticClass:"input__item"},[s("i",{staticClass:"iconfont icon-code"}),s("el-input-number",{staticClass:"input__item-i",attrs:{controls:!1,disabled:"",precision:6,placeholder:t.$t("l.j_tradea")},model:{value:t.buy_a.realAmount,callback:function(e){t.$set(t.buy_a,"realAmount",e)},expression:"buy_a.realAmount"}}),s("el-button",{staticClass:"item-btn"},[t._v(t._s(t.buy_a.baseCoin))])],1),s("el-button",{staticClass:"input__btn input__buy",attrs:{loading:t.buy_a.loading},on:{click:t.submitBuy}},[s("i",{staticClass:"iconfont iconf-feiji"}),t._v(" "),s("span",[t._v(t._s(t.isLogin?t.$t("l.s_buys"):t.$t("l.j_logt")))])])],1)]):s("div",{staticClass:"panel__oper-item"},[s("div",{staticClass:"input"},[s("div",{staticClass:"input__desc"},[s("span",[t._v(t._s(t.$t("l.j_ket"))+" "+t._s(t.sell_a.quoteCoin)+": ")]),s("span",[t._v(t._s(t.sell_a.quoteAvailable))])]),s("div",{staticClass:"input__item"},[s("i",{staticClass:"iconfont icon-num"}),s("el-input-number",{ref:"priceInput_b",staticClass:"input__item-i",attrs:{controls:!1,min:0,precision:4,step:1,placeholder:t.$t("l.j_plsenter")},model:{value:t.sell_a.quotePrice,callback:function(e){t.$set(t.sell_a,"quotePrice",e)},expression:"sell_a.quotePrice"}}),s("el-button",{staticClass:"item-btn"},[t._v(t._s(t.sell_a.baseCoin))])],1),s("div",{staticClass:"input__item"},[s("i",{staticClass:"iconfont icon-amt"}),s("el-input-number",{staticClass:"input__item-i",attrs:{controls:!1,min:0,precision:6,step:.01,placeholder:t.$t("l.s_numl")},model:{value:t.sell_a.baseCount,callback:function(e){t.$set(t.sell_a,"baseCount",e)},expression:"sell_a.baseCount"}}),s("el-button",{staticClass:"item-btn"},[t._v(t._s(t.sell_a.quoteCoin))])],1),s("div",{staticClass:"input__item"},[s("i",{staticClass:"iconfont icon-code"}),s("el-input-number",{staticClass:"input__item-i",attrs:{controls:!1,disabled:"",precision:6,placeholder:t.$t("l.j_tradea")},model:{value:t.sell_a.realAmount,callback:function(e){t.$set(t.sell_a,"realAmount",e)},expression:"sell_a.realAmount"}}),s("el-button",{staticClass:"item-btn"},[t._v(t._s(t.sell_a.baseCoin))])],1),s("el-button",{staticClass:"input__btn input__sell",attrs:{loading:t.sell_a.loading},on:{click:t.submitSell}},[s("i",{staticClass:"iconfont iconf-feiji"}),t._v(" "),s("span",[t._v(t._s(t.isLogin?t.$t("l.s_sells"):t.$t("l.j_logt")))])])],1)])])}),[],!1,null,"457be90f",null).exports),p=s("7613"),m=s("5b8a"),C={name:"trade",components:{KInfo:a.a,KHeader:n.a,KPanel:i.a,KAll:o.a,KLineChartView:p.a,UDelegate:d,OperPanel:f},data:function(){return{market:new m.a,counter:0}},mounted:function(){var t=this.$route.query;t&&t.baseCurrency&&(this.market.currencyInfo=this.$route.query,this.market.currency=this.$route.query.baseCurrency),this.market.timeTabs=[{key:1,name:this.$t("l.s_1min"),text:"1min"},{key:2,name:this.$t("l.s_5min"),text:"5min"},{key:3,name:this.$t("l.s_15min"),text:"15min"},{key:4,name:this.$t("l.s_30min"),text:"30min"},{key:5,name:this.$t("l.s_1day"),text:"1day"}],this.market.kouLines=10,this.market.getKLineDepth(),this.market.getKLineTrade()},methods:{changeTimer:function(t){this.market.timer=t.text},countDown:function(t){this.counter+=1,this.market.currencyInfo=t,this.market.getKLineDepth(),this.$refs.kInfo.getData(),3==this.counter&&(this.counter=-1,this.$refs.kDelegate.onPullingDown())},changeCurrency:function(t){this.market.currencyInfo=t,this.market.currency=t.baseCurrency,this.$refs.kline.initInfo()},selectPrice:function(t){this.$eventBus.$emit("priceChange",t)},settingSubs:function(t){this.$refs.kline.setSubTechnicalIndicator(t)},settingMains:function(t){this.$refs.kline.setCandleTechnicalIndicator(t)}}},y=(s("597d"),Object(_.a)(C,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"container__top"},[s("div",{staticClass:"top-l"},[s("k-info",{ref:"kInfo",on:{detail:t.changeCurrency}})],1),s("div",{staticClass:"top-k mrg-l-3"},[s("k-header",{attrs:{info:t.market.currencyInfo,tabs:t.market.timeTabs},on:{subs:t.settingSubs,mains:t.settingMains,change:t.changeTimer}}),s("k-line-chart-view",{ref:"kline",attrs:{info:t.market.currencyInfo,theme:"dark",timer:t.market.timer},on:{refreshing:t.countDown}})],1),s("div",{staticClass:"top-p mrg-l-3"},[s("k-panel",{attrs:{info:t.market.currencyInfo,buys:t.market.kouBuys,sells:t.market.kouSells},on:{select:t.selectPrice}})],1),s("div",{staticClass:"top-a mrg-l-3"},[s("k-all",{attrs:{alls:t.market.deals}})],1)]),s("div",{staticClass:"container__bottom"},[s("div",{staticClass:"bottom-l"},[s("u-delegate",{ref:"kDelegate",attrs:{info:t.market.currencyInfo}})],1),s("div",{staticClass:"bottom-r mrg-l-3"},[s("oper-panel",{ref:"kOper",attrs:{info:t.market.currencyInfo}})],1)])])}),[],!1,null,"3d25ab46",null));e.default=y.exports}}]);